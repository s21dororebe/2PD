(()=>{"use strict";function e(e,n){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,l=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){o=!0,d=e},f:function(){try{l||null==a.return||a.return()}finally{if(o)throw d}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var n=null;function a(){d(),fetch("http://localhost/data/get-top-books").then((function(e){return e.json()})).then((function(t){l(),function(t){var a,r=0,c=e(t);try{for(c.s();!(a=c.n()).done;){var d=a.value;r++;var l=document.createElement("div");l.classList="row mb-5 pt-5 pb-5 bg-light";var o=document.createElement("div");o.classList="col-md-6 mt-2 px-5 "+(r%2==0?"text-end order-1":"text-start order-2");var i=document.createElement("p");if(i.classList="display-4",i.textContent=d.name,o.appendChild(i),d.description.length>0){var s=document.createElement("p");s.classList="lead",s.textContent=d.description.split(" ").slice(0,32).join(" ")+"...",o.appendChild(s)}var m=document.createElement("a");m.classList="btn btn-success see-more "+(r%2==0?"float-right":"float-left"),m.textContent="Apskatؤ«t",m.href="#",m.dataset.bookId=d.id,o.appendChild(m),l.appendChild(o);var u=document.createElement("div");u.classList="col-md-6 text-center "+(r%2==0?"order-2":"order-1");var p=document.createElement("img");p.classList="img-fluid img-thumbnail rounded-lg w-50",p.alt=d.name,p.src=d.image,u.appendChild(p),l.appendChild(u),n.appendChild(l)}}catch(e){c.e(e)}finally{c.f()}}(t)})).then((function(){c()}))}function r(t){d(),fetch("http://localhost/data/get-book/"+t).then((function(e){return e.json()})).then((function(e){l(),function(e){var t=document.createElement("div");t.classList="row mb-5";var a=document.createElement("div");a.classList="col-md-6 pt-5";var r=document.createElement("h1");if(r.classList="display-3",r.textContent=e.name,a.appendChild(r),e.description.length>0){var c=document.createElement("p");c.classList="lead",c.textContent=e.description,a.appendChild(c)}var d=document.createElement("dl");d.classList="row";var l=document.createElement("dt");l.classList="col-sm-3",l.textContent="Gads",d.appendChild(l);var o=document.createElement("dd");o.classList="col-sm-9",o.textContent=e.year,d.appendChild(o);var i=document.createElement("dt");i.classList="col-sm-3",i.textContent="Cena",d.appendChild(i);var s=document.createElement("dd");if(s.classList="col-sm-9",s.innerHTML="&euro; "+e.price,d.appendChild(s),e.genre.length>0){var m=document.createElement("dt");m.classList="col-sm-3",m.textContent="إ½anrs",d.appendChild(m);var u=document.createElement("dd");u.classList="col-sm-9",u.textContent=e.genre,d.appendChild(u)}a.appendChild(d);var p=document.createElement("a");p.classList="btn btn-dark go-back float-left",p.textContent="Uz sؤپkumu",p.href="#",a.appendChild(p),t.appendChild(a);var f=document.createElement("div");f.classList="col-md-6 text-center p-5";var h=document.createElement("img");h.classList="img-fluid img-thumbnail rounded-lg",h.alt=e.name,h.src=e.image,f.appendChild(h),t.appendChild(f),n.appendChild(t)}(e)})).then((function(){fetch("http://localhost/data/get-related-books/"+t).then((function(e){return e.json()})).then((function(t){!function(t){var a=document.createElement("div");a.classList="row mt-5";var r=document.createElement("div");r.classList="col-md-12";var c=document.createElement("h2");c.classList="display-4",c.textContent="Lؤ«dzؤ«gas grؤپmatas",r.appendChild(c),a.appendChild(r),n.appendChild(a);var d=document.createElement("div");d.classList="row mb-5";var l,o=e(t);try{for(o.s();!(l=o.n()).done;){var i=l.value,s=document.createElement("div");s.classList="col-md-4";var m=document.createElement("div");m.classList="card";var u=document.createElement("img");u.classList="card-img-top",u.alt=i.name,u.src=i.image,m.appendChild(u);var p=document.createElement("div");p.classList="card-body";var f=document.createElement("h5");f.classList="card-title",f.textContent=i.name,p.appendChild(f);var h=document.createElement("a");h.classList="btn btn-success see-more",h.textContent="Apskatؤ«t",h.href="#",h.dataset.bookId=i.id,p.appendChild(h),m.appendChild(p),s.appendChild(m),d.appendChild(s)}}catch(e){o.e(e)}finally{o.f()}n.appendChild(d)}(t)})).then((function(){c()}))}))}function c(){var t,n=e(document.querySelectorAll("a.see-more"));try{var c=function(){var e=t.value;e.addEventListener("click",(function(t){t.preventDefault(),r(e.dataset.bookId)}))};for(n.s();!(t=n.n()).done;)c()}catch(e){n.e(e)}finally{n.f()}var d,l=e(document.querySelectorAll("a.go-back"));try{for(l.s();!(d=l.n()).done;){d.value.addEventListener("click",(function(e){e.preventDefault(),a()}))}}catch(e){l.e(e)}finally{l.f()}}function d(){n.innerHTML="";var e=document.createElement("div");e.id="loading",e.classList="text-center p-5";var t=document.createElement("img");t.alt="...",t.src="/loading.gif",e.appendChild(t),n.appendChild(e)}function l(){document.getElementById("loading").remove()}document.addEventListener("DOMContentLoaded",(function(){n=document.getElementById("root"),a()}))})();